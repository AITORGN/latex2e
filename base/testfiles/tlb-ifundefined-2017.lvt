\RequirePackage[2017-04-15]{latexrelease}
\input{test2e}

% testing \@ifthenelse with defined and undefinined commands
% including unmatched \if
% finally test whether undefined command gets set to \relax
% or (from 2018 on) left undefined

\START

\wlog{test 1 \@ifundefined{\expandafter\@gobble\string\if}{Y}{N}}
\wlog{test 2 \@ifundefined{\expandafter\string\csname def\endcsname}{Y}{N}}
\wlog{test 3 \@ifundefined{\string\if}{Y}{N}}
\wlog{test 4 \@ifundefined{hbox}{Y}{N}}
\wlog{test 5 \@ifundefined{wibble}{Y}{N}}
\wlog{test 6 \@ifundefined{wibble-2}{Y\par}{N\par}}
\wlog{test 7 \@ifundefined{vbox}{Y\par}{N\par}}
\wlog{test 8 \meaning\wibble}

\END