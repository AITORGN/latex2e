%%%--- unfinished draft ---


% \iffalse meta-comment
%
% Copyright 2014
% The LaTeX3 Project and any individual authors listed elsewhere
% in this file.
%
% This file is part of the LaTeX base system.
% -------------------------------------------
%
% It may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3c
% of this license or (at your option) any later version.
% The latest version of this license is in
%    http://www.latex-project.org/lppl.txt
% and version 1.3c or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This file has the LPPL maintenance status "maintained".
%
% The list of all files belonging to the LaTeX base distribution is
% given in the file `manifest.txt'. See also `legal.txt' for additional
% information.
%
% The list of derived (unpacked) files belonging to the distribution
% and covered by LPPL is defined by the unpacking scripts (with
% extension .ins) which are part of the distribution.
%
% \fi
% Filename: ltnews21.tex
%
% This is issue 21 of LaTeX News.

\documentclass{ltnews}

\usepackage[T1]{fontenc}

\usepackage{lmodern,url}

\publicationmonth{May}
\publicationyear{2014}

\publicationissue{21}

\begin{document}

\maketitle

\section{Scheduled \LaTeX\ bug-fix release}

This issue of \LaTeX~News marks the second bug-fix release of
\LaTeXe\ since shifting to a new build system in 2009.
Provided sufficient changes are made, we expect to
repeat such releases yearly or bi-yearly to stay in sync with \TeX\ Live.

\section{Continued development}

\begin{itshape} % still from ltnews20

The \LaTeXe\ kernel is no longer being actively developed, as any non-negligible changes now could have dramatic backwards compatibility issues with old documents. Similarly, new features cannot be added to the kernel since any new documents written now would then be incompatible with legacy versions of \LaTeX{} of which there are many in the fields.

The situation on the package level is quite different though. While most of us have stopped developing packages for \LaTeXe{} there are many contributing developers that continue to enrich \LaTeXe{} by providing or extending add-on packages with new or better functionality.

However, the \LaTeX\ team certainly recognises that there are improvements to be made to the kernel code; over the last few years we have been working on building, expanding, and solidifying the \textsf{expl3} programming layer for future \LaTeX\ development. We are using \textsf{expl3} to build new interfaces for package development and tools for document design. Progress here is continuing.

\end{itshape}



\section{Release notes}

In addition to a few small documentation fixes, the following changes
have been made to the \LaTeXe\ code; in accordance with the philosophy
of minimising forwards and backwards compatibility problems, most of
these will not be noticeable to the regular \LaTeX\ user.

References in the text below of the form ``graphics/3873'' refer to
bug reports listed
at:\\ \url{http://latex-project.org/cgi-bin/ltxbugs2html}


\paragraph{\texttt{fixltx2e} updates}

There are a number of bugs to the core \LaTeX{} that should have are
corrected in the kernel code but that never made it in there because
of backwards compatibility---basically we expect that too many
documents out there that have worked around the bug or use that
particular misfeature, so that a correction would break too many
existing documents. Corrections to those type of bugs have been placed
into the package \texttt{fixltx2e}.
 
\textit{what do we do here, what is still to do?}

For this release we made the following changes:
\begin{itemize}
\item
   Misspelled float placement specifiers such as
   \verb=\begin{figure}[tv]= instead of \texttt{tb} are silently
   ignored by the kernel code.  Now we test for such letters and issue
   an error message.
\item
   The float algorithm of the kernel can get out of sync if you mix
   single and double-column floats (as they are placed independently
   of each other). \texttt{fixltx2e} corrected that a few years ago,
   but the fix was not perfect and generated a low-level \TeX{} error
   if used together with \verb=\enlargethispage= in one situation.
\end{itemize}



\paragraph{\texttt{inputenc} package}


\begin{itshape}
	* inputenc.dtx: allow \verb=\usepackage[utf8]{inputenc}= with luatex and xetex

	* inputenc.dtx: Save and restore catcode of @ when reading a .def file
	instead of setting it always to \verb=\makeatother= afterwards (pr/4192)

\end{itshape}

\paragraph{\texttt{fltrace} package}

For years the file \texttt{ltoutput.dtx} contained some hidden code to
trace the detailed behavior of the float placement algorithm of
\LaTeX. Prompted by questions on StackExchange we now extract this
code into a new \texttt{fltrace} package. To see the float algorithm
in action (or to understand why it decides to place all your floats at
the very end of the document) use
\begin{verbatim}
 \usepackage{fltrace} \tracefloats
\end{verbatim}
To stop tracing somewhere in the document issue
\verb=\tracefloatsoff= and to see the current value of various float
parameters use \verb=\tracefloatvals=. As the package is identical to
the kernel code with tracing added, it may or may not work if you load any
other package that manipulates that part of the kernel code. In such a
case your best bet is to load \texttt{fltrace} first.


\paragraph{The tools directory}

In the past each of the sub-directories in the ``required'' section of
the \LaTeX{} distribution came with a single \texttt{.ins} file to
generate the production code from the source files. We have now
started to change this and provide individual \texttt{.ins} files for
those packages that are likely to require updates outside a major
\LaTeX{} release.

\paragraph{\texttt{multicol} updates}

Version 1.8 of the \texttt{multicol} implements some
improvements/fixes and one extension. In the past the balancing
algorithm enlarged the column height until it found a solution that
satisfied all constraints. In case of insufficient break points the
final column height could have been much larger than expected and if
that happened near the end of the page it resulted in the text
overflowing into the bottom margin. This situation is now detected and
in that case a normal page is cut and balancing is resumed on the next
page. Some overflow is still allowed and controlled via the parameter
\verb=\maxbalancingoverflow=.

The use of \verb=\enlargethispage= is now properly supported
within the environment. Finally a new command \verb=\docolaction= was
added to allow the execution of code depending on the column the
command is executed. See the documentation for details.

With respect to bug fixes the new version fixes a color leak that
could happen in certain situations and the fact that
\texttt{multicols} could screw up the positioning of
\verb=\marginpar=s that followed the environment.

\paragraph{\texttt{tabularx} updates}

The restrictions on embedding \verb|\tabularx| \verb|\endtabularx|
into the definition of a new environment have been relaxed
slightly. See the package documentation for details.

\paragraph{\texttt{color} updates}

The \verb|\nopagecolor| command suggested by Heiko Oberdiek that has
been available for some years in the \textsf{pdftex} option has been
added to the core package as suggested in graphics/3873. Currently
this is supported in the driver files for \textsf{dvips} and
\textsf{pdftex}.  Patches to support other drivers are welcome.

 \paragraph{\texttt{graphicx} updates}

The \textsf{graphicx} version of \verb|\rotatebox| now allows ``long''
to allow \verb|\par| (and blank lines) in values to match the change
to the `\textsf{graphics} version some years ago. See graphics/4296.

\paragraph{\texttt{keyval} updates}

The parsing macros in the \textsf{keyval} package have been made
``long'' to allow \verb|\par| (and blank lines) in values. Also only
one rather than two levels of brace groups are now stripped from the
value in a construct such as \verb|key={{{value}}}|. See
graphics/3446.
\end{document}
